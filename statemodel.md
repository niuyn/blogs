# <center> 状态模式初体验
　　　在最近的项目中看到了大量的switch case，而且被认为状态模式，特此查了些资料，并记录下来，领导说的有总结才有提高还是要相信的。

先看一下状态模式的定义 Allow an object to alter its behavior when its internal state changes. The object will appear to change to change its class (当一个对象内在状态改变时充许改变其行为，这个对象看起来像改变了其类)，在例出相关例子之前看看其使用场景，状态模式适用于当某个对象在它的状态发生改变时，它的行为也随着发生较大的变化，也就是说在行为状态约束的情况下可以使用状态模式，而且使用时对象的状态最好不超过5个。

下面我们来例证，我只想到我最初工作时的一个例子，是关于电机运行的，当时还不知道状态模式这个词，用C实现的，没有封装，在这里在适合不过了，现在我将其简化用golang重写一遍。场景如下

电机运行简化为3个状态，4个事件
###### 事件

* 电机停止
* 电机运行
* 电机重启
* 电机出错
##### 状态

* 电机停止状态
* 电机运行状态
* 电机错误状态

电机在各个状态碰到各个事件，会切换到不同状态和产生不同的形为，状态切换如下图


|   |停止|运行|错误
|---|----|----|----|
停止|停止|运行|
运行
出错
重启